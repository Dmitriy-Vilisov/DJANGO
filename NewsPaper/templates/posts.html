{% extends 'flatpages/default.html' %}

{% load custom_filters %}
<!-- Подключаем новый файл с нашим тегом -->
{% load custom_tags %}

{% block title %}
Posts
{% endblock title %}

{% block content %}
<h1 xmlns="http://www.w3.org/1999/html">Все новости</h1>
   <h3>{% current_time '%b %d %Y %A' %}</h3>
   <h3> {{ post|default_if_none:"Чуть позже сообщим о новостях!" }} </h3>
   <h2>Количество свежих новостей: {{ posts|length }}</h2>

    {% if posts %}
       <table border="1" cellspacing="20" cellpadding="30">
           <tr height="50"><th>
               <!--Отразим (автора) название, (choice),  текст и дату загрузки в формате день.месяц.год.-->
               <td>Автор</td>
               <td>Название</td>
               <td>Статьи/Новости</td>
               <td>Текст</td>
               <td>Дата публикации</td>
               <!-- <td>Рейтинг</td>-->
           </th></tr>

           {% for post in posts %}
           <tr><th>
               <td align="left">{{ post.author}}</td>
               <td>{{ post.title| censor }}</td>
               <td>{{ post.choice}}</td>
               <td align="left">{{ post.text|truncatechars:21 }}</td>
               <!--  <td>{{ post.choice.name }}</td> -->
               <td align="right">{{ post.posting_time }}</td>
               <!--<td>{{ post.post_rating }}</td>-->
           </th></tr>
           {% endfor %}

       </table>
   {% else %}
       <h2>Увы новостей нет!</h2>
   {% endif %}
{% endblock content %}